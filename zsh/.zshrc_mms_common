export TERM=xterm-256color

export EDITOR=vim
export VISUAL=vim

# Using yjit in ruby
export RUBY_YJIT_ENABLE=1
export RUBY_CONFIGURE_OPTS="--enable-yjit"

# Default configuration for less to avoid pages in different pages
export LESS="-F -R -X $LESS"

alias grep='grep --color=auto'
alias clear_vim='rm -f ~/.vim/tmp/*'
alias clear_history='echo "" > ~/.zsh_history & exec $SHELL -l'

alias push_tmp_github='. ~/.push_tmp_github.sh'

alias docker_stats='docker stats $(docker ps --format={{.Names}})'
alias docker_stop='docker stop $(docker ps -a -q)'
alias docker_rm='docker rm $(docker ps -a -q)'
alias docker_clean='docker system prune --all --volumes && docker volume rm $(docker volume ls -q)'
alias portainer='docker run --rm --label service=portainer -p 9000:9000 --name portainer -v /var/run/docker.sock:/var/run/docker.sock -v ~/.config/portainer:/data portainer/portainer -l service=portainer --no-auth'
alias wtf_git='git reset --hard && git clean -xdf'
alias cat='bat'

eval "$(rbenv init -)"

# ~/.oh-my-zsh/theme/robbyrussell.zsh-theme
# PROMPT="%{$fg_bold[orange]%} [%{$fg_bold[green]%}%D{%f/%m/%y}|%*%{$fg_bold[yellow]%}]"
# PROMPT+=' %{$fg[cyan]%}%~%{$reset_color%} $(git_prompt_info)'
# ZSH_THEME_GIT_PROMPT_PREFIX="%{$fg_bold[blue]%}(%{$fg[red]%}"

# Adding last command time
function preexec() {
  timer=${timer:-$SECONDS}
}

function precmd() {
  if [ $timer ]; then
    timer_show=$(($SECONDS - $timer))
    if [[ $timer_show -ge $min_show_time ]]; then
      RPROMPT='%{$fg_bold[red]%}(${timer_show}s)%f%{$fg_bold[white]%}[%*]%f'
    else
      RPROMPT='%{$fg_bold[white]%}[%*]%f'
    fi
    unset timer
  fi
}

autoload -Uz add-zsh-hook
add-zsh-hook preexec preexec
add-zsh-hook precmd precmd

# ~/.oh-my-zsh/theme/agnoster.zsh-theme
prompt_context(){}
prompt_context() {
  # Custom (Random emoji)
  emojis=("ğŸ’©" "ğŸ¤¡" "ğŸ‘¹" "ğŸ‘º" "ğŸ‘»" "ğŸ‘½" "ğŸ‘¾" "ğŸ¤–" "ğŸ™ˆ" "ğŸ™‰" "ğŸ™Š" "ğŸ’ƒ" "ğŸº" "ğŸ»" "ğŸ¥‚" "ğŸ¥ƒ" "ğŸ¸" "ğŸŸ " "ğŸ±")
  RAND_EMOJI_N=$(( $RANDOM % ${#emojis[@]} + 1))
  prompt_segment black default "${emojis[$RAND_EMOJI_N]}"
}

### Fix slowness of pastes with zsh-syntax-highlighting.zsh
# https://github.com/zsh-users/zsh-syntax-highlighting/issues/513#issuecomment-545493062
pasteinit() {
  OLD_SELF_INSERT=${${(s.:.)widgets[self-insert]}[2,3]}
  zle -N self-insert url-quote-magic # I wonder if you'd need `.url-quote-magic`?
}

pastefinish() {
  zle -N self-insert $OLD_SELF_INSERT
}
zstyle :bracketed-paste-magic paste-init pasteinit
zstyle :bracketed-paste-magic paste-finish pastefinish
### Fix slowness of pastes

# Using in the VM
source ~/.zsh/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
source ~/.zsh/zsh-autosuggestions/zsh-autosuggestions.zsh

# Using in mac installed with brew
# source /usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh
# source /usr/local/share/zsh-autosuggestions/zsh-autosuggestions.zsh

#Â Starting docker-machine to use it in macos
# Because I'm using the brew install instead of the desktop docker
# https://medium.com/@yutafujii_59175/a-complete-one-by-one-guide-to-install-docker-on-your-mac-os-using-homebrew-e818eb4cfc3
# echo
# echo Verifing docker configuration
# docker-machine env default
# eval $(docker-machine env default)
# echo
